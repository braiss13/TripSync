<div class="d-flex justify-content-between align-items-center">
    <div>
        <b>{{ trip['origin'] }} to {{ trip['destination'] }}</b><br/>
        <span>{{ trip['time'] }} | Duration: {{ trip['duration'] }} mins | Fare: {{ trip['fare'] }} â‚¬</span><br/>
        <span>Created by: <a href="{{ url_for('user_blpr.user_profile', user_id=trip['user_id']) }}">{{ creator_name }}</a></span>

        <div>
            <br>
            <span><i>Participants</i>: 
                {% if trip['participants'] %}
                    {% for participant in trip['participants'] %}
                        <a href="{{ url_for('user_blpr.user_profile', user_id=participant) }}">{{ participant }}</a>{% if not loop.last %}, {% endif %}
                    {% endfor %}
                {% else %}
                    No participants yet.
                {% endif %}
            </span>
        </div>
        
        <div>
            <br>
            <span><u>Scores</u>: 
                {% if scores %}
                    {% for score in scores %}
                        {% if score.get("error") %}
                            I like cheese.
                            <b>{{ score.error }}</b><br/>
                        {% else %}
                            <div>
                                <b>Rating:</b>&nbsp;<span style="font-size: 120%">{{ score['rating'] }}</span><br/>
                                <b>Comment:</b>&nbsp;<span style="font-size: 120%">{{ score['comment'] }}</span><br/>
                                <b>Trip:</b>&nbsp;<span style="font-size: 120%">{{ score['trip']['origin'] }} to {{ score['trip']['destination'] }}</span><br/>
                                <b>Date:</b>&nbsp;<span style="font-size: 120%">{{ score['date'] }}</span><br/>
                                <b>User:</b>&nbsp;<span style="font-size: 120%">{{ score['user']['name'] }} {{ score['user']['surname'] }}</span><br/>
                            </div>
                            <br/>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    No scores yet.
                {% endif %}
            </span>
        </div>

        {% if usr['email'] != trip['user_id'] %}
        <form method="post" action="{{ url_for('trip_blpr.trip_join', trip_id=trip['id']) }}" style="display:inline;">
            <button type="submit" class="btn btn-primary btn-sm">
                Join
            </button>
        </form>
        {% endif %}

        {% if usr['email'] in trip['participants'] %}
        <form method="post" action="{{ url_for('score_blpr.score_add', trip_id=trip['id']) }}" style="display:inline;">
            <button type="submit" class="btn btn-secondary btn-sm">
                Add Score
            </button>
        </form>
        {% endif %}
    </div>
    <div>
        {% if trip['user_id'] == usr['email'] %}
        <a href="{{ url_for('trip_blpr.trip_edit', trip_id=trip['id']) }}" class="btn btn-warning btn-sm">
            Edit
        </a>
        <form method="get" action="{{ url_for('trip_blpr.trip_delete') }}" style="display:inline;">
            <input type="hidden" name="trip_id" value="{{ trip['id'] }}">
            <button type="submit" class="btn btn-danger btn-sm">
                Delete
            </button>
        </form>
        {% endif %}
    </div>
</div>

<div class="d-flex justify-content-between align-items-center">
    <div>
        <b>{{ trip['origin'] }} to {{ trip['destination'] }}</b><br/>
        <span>{{ trip['time'] }} | Duration: {{ trip['duration'] }} mins | Fare: {{ trip['fare'] }} â‚¬</span><br/>
        <span>Created by: <a href="{{ url_for('user_blpr.user_profile', user_id=trip['user_id']) }}">{{ creator_name }}</a></span>

        <div>
            <br>
            <span><i>Participants</i>: 
                {% if trip['participants'] %}
                    {% for participant in participants %}
                        <a href="{{ url_for('user_blpr.user_profile', user_id=participant) }}">{{ participant }}</a>{% if not loop.last %}, {% endif %}
                    {% endfor %}
                {% else %}
                    No participants yet.
                {% endif %}
            </span>
        </div>
        
        <div>
            <br>
            <span><u>Scores</u>: 
                {% if trip['scores'] %}
                    {% for score in scores %}
                            <div>
                                <b>User:</b> <a href="{{ url_for('user_blpr.user_profile', user_id=score['user']['email']) }}">{{ score['user']['email'] }}</a><br/>
                                <b>Rating:</b>
                                <span class="stars">
                                    {% for i in range(1, 6) %}
                                        {% if i <= score['rating'] %}
                                            <i class="fas fa-star filled"></i>
                                        {% else %}
                                            <i class="fas fa-star"></i>
                                        {% endif %}
                                    {% endfor %}
                                </span><br/>
                                <b>Comment:</b> {{ score['comment'] }}<br/>
                                <b>Date:</b> {{ score['date'] }}
                            </div>
                            <br>
                    {% endfor %}
                {% else %}
                    No scores yet.
                {% endif %}
            </span>
        </div>

        {% if usr['email'] != trip['user_id'] %}
        <form method="post" action="{{ url_for('trip_blpr.trip_join', trip_id=trip['safe_id']) }}" style="display:inline;">
            <button type="submit" class="btn btn-primary btn-sm">
                Join
            </button>
        </form>
        {% endif %}

        {% if usr['email'] in trip['participants'] %}
        <form method="post" action="{{ url_for('score_blpr.score_add', trip_id=trip['safe_id']) }}" style="display:inline;">
            <button type="submit" class="btn btn-secondary btn-sm">
                Add Score
            </button>
        </form>
        {% endif %}
    </div>
    <div>
        {% if trip['user_id'] == usr['email'] %}
        <a href="{{ url_for('trip_blpr.trip_edit', trip_id=trip['safe_id']) }}" class="btn btn-warning btn-sm">
            Edit
        </a>
        <form method="get" action="{{ url_for('trip_blpr.trip_delete') }}" style="display:inline;">
            <input type="hidden" name="trip_id" value="{{ trip['safe_id'] }}">
            <button type="submit" class="btn btn-danger btn-sm">
                Delete
            </button>
        </form>
        {% endif %}
    </div>
</div>

<style>
    .stars .fa-star {
        color: transparent;
        -webkit-text-stroke: 1px #FFD700;
    }
    .stars .fa-star.filled {
        color: #FFD700;
    }
</style>
